<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>2D Uçak Oyunu</title>
<style>
  canvas {
    background: #87CEEB; /* Gökyüzü rengi */
    display: block;
    margin: 0 auto;
    border: 2px solid black;
    touch-action: none; /* kaydırmayı engeller */
  }
</style>
</head>
<body>
<canvas id="game" width="500" height="600"></canvas>
<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');

const player = {
  x: 225,
  y: 500,
  width: 50,
  height: 50,
  speed: 5
};

const bullets = [];
const enemies = [];
let enemyTimer = 0;
let score = 0;

// Ateşleme sınırı (0.5 saniye)
let lastShotTime = 0;
const shotInterval = 500; // 0.5 saniye

// Klavye kontrolleri
const keys = {};
document.addEventListener('keydown', e => keys[e.key.toLowerCase()] = true);
document.addEventListener('keyup', e => keys[e.key.toLowerCase()] = false);

// Fare ve dokunmatik ateşleme
function tryShoot() {
  const now = Date.now();
  if(now - lastShotTime >= shotInterval){
    bullets.push({x: player.x+22, y: player.y, width:6, height:12, speed:7});
    lastShotTime = now;
  }
}
canvas.addEventListener('mousedown', tryShoot);
canvas.addEventListener('touchstart', e => { e.preventDefault(); tryShoot(); });

// Oyun döngüsü
function update() {
  // Player hareketi (W,A,S,D)
  if(keys['w'] && player.y>0) player.y -= player.speed;
  if(keys['s'] && player.y<canvas.height-player.height) player.y += player.speed;
  if(keys['a'] && player.x>0) player.x -= player.speed;
  if(keys['d'] && player.x<canvas.width-player.width) player.x += player.speed;

  // Bilgisayarda ateş (space veya f tuşu)
  if(keys[' ']) tryShoot();

  // Mermileri hareket ettir
  bullets.forEach((b,i)=>{
    b.y -= b.speed;
    if(b.y<0) bullets.splice(i,1);
  });

  // Düşman ekleme
  enemyTimer++;
  if(enemyTimer>50){
    enemies.push({x: Math.random()*450, y:-50, width:50, height:50, speed:2});
    enemyTimer=0;
  }

  // Düşman hareketi ve çarpışma
  enemies.forEach((e,i)=>{
    e.y += e.speed;

    if(e.y>canvas.height) enemies.splice(i,1);

    // Çarpışma kontrolü (player)
    if(e.x < player.x+player.width && e.x+e.width > player.x &&
       e.y < player.y+player.height && e.y+e.height > player.y){
         alert("Oyun Bitti! Skor: "+score);
         document.location.reload();
    }

    // Çarpışma kontrolü (mermiler)
    bullets.forEach((b,j)=>{
      if(e.x < b.x+b.width && e.x+e.width > b.x &&
         e.y < b.y+b.height && e.y+e.height > b.y){
        enemies.splice(i,1);
        bullets.splice(j,1);
        score++;
      }
    });
  });

  draw();
  requestAnimationFrame(update);
}

// Çizim fonksiyonu
function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // Player
  ctx.fillStyle = 'green';
  ctx.fillRect(player.x, player.y, player.width, player.height);

  // Mermiler
  ctx.fillStyle = 'red';
  bullets.forEach(b=>ctx.fillRect(b.x,b.y,b.width,b.height));

  // Düşmanlar
  ctx.fillStyle = 'blue';
  enemies.forEach(e=>ctx.fillRect(e.x,e.y,e.width,e.height));

  // Skor
  ctx.fillStyle = 'black';
  ctx.font = '20px Arial';
  ctx.fillText("Skor: "+score, 10, 30);
}

// Başlat
update();
</script>
</body>
</html>
